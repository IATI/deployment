<VirtualHost *:80>
    ServerAdmin webmaster@localhost

    #Alias /awstatsclasses "/usr/share/awstats/lib/"
    #Alias /awstats-icon "/usr/share/awstats/icon/"
    #Alias /awstatscss "/usr/share/doc/awstats/examples/css"
    #ScriptAlias /awstats/ /usr/lib/cgi-bin/
    #Options ExecCGI -MultiViews +SymLinksIfOwnerMatch


#    DocumentRoot /var/www
    <Directory />
        Options FollowSymLinks
        AllowOverride None
    </Directory>
    <Directory /var/www/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Order allow,deny
        allow from all
    </Directory>
#
#    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
#    <Directory "/usr/lib/cgi-bin">
#        AllowOverride None
#        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
#        Order allow,deny
#        Allow from all
#    </Directory>
#
    ErrorLog ${APACHE_LOG_DIR}/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    #LogLevel warn
    LogLevel info

    CustomLog ${APACHE_LOG_DIR}/access.log combined

#    Alias /doc/ "/usr/share/doc/"
#    <Directory "/usr/share/doc/">
#        Options Indexes MultiViews FollowSymLinks
#        AllowOverride None
#        Order deny,allow
#        Deny from all
#        Allow from 127.0.0.0/255.0.0.0 ::1/128
#    </Directory>

    WSGIDaemonProcess datastore user=datastore group=datastore processes=1 threads=15
    WSGIProcessGroup datastore
    WSGIScriptAlias / /home/datastore/datastore.wsgi
    Alias /query /var/www/query
    Alias /docs /home/datastore/IATI-Datastore/docs/_build/dirhtml
    redirect 302 /ns https://github.com/IATI/IATI-Datastore/blob/master/iati-extra-namespace.md
    RedirectMatch ^/$ /docs
    RedirectMatch ^/error$ /docs/api/error
    redirect 302 /docs/csv-query-builder /query
    Redirect 301 /docs/api/error/ http://iatistandard.org/guidance/datastore/reference/error-api/
    Redirect 301 /docs/api/ http://iatistandard.org/202/guidance/datastore/reference/data-api/
    Redirect 301 /docs/user-guide/how-is-the-csv-data-displayed/ http://iatistandard.org/guidance/datastore/guidance/data-formats/#csv
    Redirect 301 /docs/user-guide/selecting-data-for-csv-output/ http://iatistandard.org/guidance/datastore/guidance/forming-queries/
    Redirect 301 /docs/user-guide/how-is-the-data-organised-and-retrieved/ http://iatistandard.org/guidance/datastore/reference/structure-of-data/
    Redirect 301 /docs/user-guide/how-is-the-data-updated/ http://iatistandard.org/guidance/datastore/reference/structure-of-data/
    Redirect 301 /docs/user-guide/tips-pitfalls-and-warnings/ http://iatistandard.org/guidance/datastore/#alpha-status
    Redirect 301 /docs/user-guide/support/ http://iatistandard.org/guidance/datastore/#alpha-status
    Redirect 301 /docs/user-guide/what-is-the-iati-data-store/ http://iatistandard.org/guidance/datastore/
    Redirect 301 /docs/user-guide/what-kind-of-information-are-you-looking-for/ http://iatistandard.org/guidance/datastore/
    Redirect 301 /docs/ http://iatistandard.org/guidance/datastore/
    Redirect 301 /docs/user-guide/ http://iatistandard.org/guidance/datastore/guidance/
    Header set Access-Control-Allow-Origin "*"
</VirtualHost>
